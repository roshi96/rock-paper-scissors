<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Rock Paper Scissors</title>
    </head>

    <body>
        <script>
            function computerPlay(){
                let computerOutput;
                let random = Math.floor(Math.random() * 3);

                if (random === 0){
                    computerOutput = 'rock';
                }else if(random === 1){
                    computerOutput = 'paper';
                }else if(random === 2){
                    computerOutput = 'scissors';
                }

                return computerOutput;
            }

            function playRound(playerSelection, computerSelection){
                let outcome;
                let winner;

                playerSelection = playerSelection.toLowerCase();

                if(playerSelection === 'rock' && computerSelection === 'scissors' || playerSelection === 'paper' && computerSelection === 'rock' || playerSelection === 'scissors' && computerSelection === 'paper'){
                    playerSelection = playerSelection.charAt(0).toUpperCase() + playerSelection.slice(1);
                    computerSelection = computerSelection.charAt(0).toUpperCase() + computerSelection.slice(1);

                    console.log(outcome = 'You Win! ' + playerSelection + ' beats ' + computerSelection);
                    winner = 1;

                }else if(playerSelection === 'scissors' && computerSelection === 'rock' || playerSelection === 'rock' && computerSelection === 'paper' || playerSelection === 'paper' && computerSelection === 'scissors'){
                    playerSelection = playerSelection.charAt(0).toUpperCase() + playerSelection.slice(1);
                    computerSelection = computerSelection.charAt(0).toUpperCase() + computerSelection.slice(1);

                    console.log(outcome = 'You Lose! ' + computerSelection + ' beats ' + playerSelection);
                    winner = 2;

                }else{
                    playerSelection = playerSelection.charAt(0).toUpperCase() + playerSelection.slice(1);
                    computerSelection = computerSelection.charAt(0).toUpperCase() + computerSelection.slice(1);

                    console.log(outcome = 'Draw! ' + playerSelection + ' is the same as ' + computerSelection);
                    winner = 3;
                }
                return winner;
            }

            function game(){
                let playerWin = 0;
                let computerWin = 0;

                for (let i = 0; i < 5; i++){
                    let playerInput = prompt('Enter either Rock, Paper or Scissors');
                    
                    if(playerInput === null){
                        alert('Game Cancelled! Refresh page to play again!');
                        i = 5;
                    }else{
                        if (playerInput.toLowerCase() == 'rock' || playerInput.toLowerCase() == 'paper' || playerInput.toLowerCase() == 'scissors' ){
                        
                        let a = playRound(playerInput, computerPlay());

                            if(a == 1){
                                playerWin++;
                                /*console.log(playerWin);*/

                            }else if(a == 2){
                                computerWin++;
                                /*console.log(computerWin);*/

                            }else if(a == 3){
                                if(i < 0){
                                    i = 0;
                                }else{
                                    i--;
                                }
                            }
                        
                        }else{
                            alert('Incorrect input!');
                            if(i < 0){
                                i = 0;
                            }else{
                                i--;
                            }
                        }
                    }                    
                }

                if(playerWin > computerWin){
                    alert('Congratulations! You Won! Refresh page to play again!');
                }else if(playerWin < computerWin){
                    alert('HA HA! You Lose! Refresh page to play again!');
                }

                console.clear();
            }

            game();

            /* To check whether the output would be random each time
            console.log(computerPlay());
            console.log(computerPlay());
            console.log(computerPlay());*/

            /* To check whether the output would work for one round of Rock Paper Scissors
            const playerSelection = 'PaPer';
            const computerSelection = computerPlay();
            console.log(playRound(playerSelection, computerSelection));*/

        </script>
    </body>
</html>